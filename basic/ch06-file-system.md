# 第 6 课：文件系统

## 阅读 Node.js API 资料

- [文件 API 资料](http://nodejs.cn/api/fs.html)
- 将 fs 模块中的函数分类整理成[思维导图](http://naotu.baidu.com/file/74c2915d47a4e7ae561b9f57940865c3?token=743a4bf398643762)

## 回调异步方式打印文件内容

要求：
- 创建 10-file-system 目录 
- 编写 01-my-cat-async.js 脚本
- 要求支持命令行参数，包括：要打印的文件名
- 没有命令行参数时，默认打印脚本本身内容
- 文件不存在则打印错误信息
- 文件存在则在控制台打印文件内容
- 用回调异步方式读取文件内容

## Promise 异步方式打印文件内容

要求：
- 创建 10-file-system 目录 
- 编写 02-my-cat-promise.js 脚本
- 要求支持命令行参数，包括：要打印的文件名
- 文件不存在则打印错误信息
- 文件存在则在控制台打印文件内容
- 用 Promise 异步方式读取文件内容

## 底层 API 打印文件内容

要求：
- 编写 02-my-cat-lower.js 脚本
- 要求支持命令行参数，包括：要打印的文件名
- 没有命令行参数时，默认打印脚本本身内容
- 文件不存在则打印错误信息
- 文件存在则在控制台打印文件内容
- 用底层 API 打开文件，再同步读取文件内容

## 混合方式打印文件内容

要求：
- 编写 03-my-cat-mix.js 脚本
- 要求支持命令行参数，包括：要打印的文件名
- 没有命令行参数时，默认打印脚本本身内容
- 文件不存在则打印错误信息
- 文件存在则在控制台打印文件内容
- 用底层 API 打开文件，再同步读取文件内容
- 用 writeSync 向控制台输出文件内容

## 流方式打印文件内容

要求：
- 编写 04-my-cat-stream.js 脚本
- 要求支持命令行参数，包括：要打印的文件名
- 没有命令行参数时，默认打印脚本本身内容
- 文件不存在则打印错误信息
- 命令行参数是目录名称时打印相应的错误信息
- 文件存在则在控制台打印文件内容
- 用流的方式读取文件内容并将管道接入到标准输出流上

## 同步方式打印文件内容

要求：
- 编写 05-my-cat-sync.js 脚本
- 要求支持命令行参数，包括：要打印的文件名
- 没有命令行参数时，默认打印脚本本身内容
- 文件不存在则打印错误信息
- 文件存在则在控制台打印文件内容
- 用同步的方式读取文件内容并将文件内容输出到控制台上

## 复制文件

要求：
- 编写 06-my-cp.js 脚本
- 要求支持命令行参数，包括：要复制的源文件名和目标文件名
- 源文件不存在则打印错误信息
- 除了能复制文件内容，还需要复制文件权限
- 用 fs 模块的底层 API 实现 06-my-cp-low.js
- 用 fs 模块的同步 API 实现 06-my-cp-sync.js
- 用 fs 模块的异步 API 实现 06-my-cp-async.js
- 用 fs 模块的底层和高级 API 实现 06-my-cp-mix.js
- 用 fs 模块的流 API 实现 06-my-cp-stream.js

## 移动文件

要求：
- 编写 07-my-mv.js 脚本
- 要求支持命令行参数，包括：要移动的源文件名和目标文件名
- 源文件不存在则打印错误信息
- 除了能移动文件，可以修改文件名

## 删除文件

要求：
- 编写 08-my-rm.js 脚本
- 要求支持命令行参数，包括：要删除的文件名
- 文件不存在打印错误信息
- 文件存在则删除
- 如果命令行参数指定的是一个目录，则忽略他

## 创建空文件

要求：
- 编写 09-my-touch.js 脚本
- 要求支持命令行参数，包括：要创建的文件名
- 命令行参数不存在打印错误信息
- 创建指定名称的文件
- 文件的长度为 0 字节

## 查看目录内容

要求：
- 编写 10-my-ls.js 脚本
- 要求支持命令行参数，包括：要查看的目录名
- 命令行参数不存在的情况下，默认查看当前脚本所在目录
- 命令行参数指定的目录不存在的情况下，打印错误信息
- 在控制台打印指定目录下的内容

## 创建目录

要求：
- 编写 11-my-mkdir.js 脚本
- 要求支持命令行参数，包括：要创建的目录名
- 命令行参数不存在的情况下，打印错误信息
- 在当前目录创建指定名称的文件夹

## 删除目录

要求：
- 编写 12-my-rm-dir.js 脚本
- 要求支持命令行参数，包括：要删除的目录名
- 命令行参数不存在的情况下，打印错误信息
- 删除指定名称的文件夹
- 如果命令行参数是一个文件名，则忽略他

## 创建链接

要求：
- 编写 13-my-ln.js 脚本
- 要求支持命令行参数，包括：源文件和链接文件或者 -s 选项
- -s 选项说明创建的是符号链接
- 没有 -s 选项说明创建的是硬链接
- 命令行参数不正确时，提示相应的错误信息
- 可以创建硬链接也可以创建符号链接

## 打印链接

要求：
- 编写 14-read-lnk.js 脚本
- 要求支持命令行参数，包括：链接文件名
- 命令行参数不存在的情况下，打印错误信息
- 命令行参数指定的文件名不存在时，打印错误信息
- 正常情况下打印符号链接所链接的文件

## 修改文件权限

要求：
- 编写 15-my-chmod.js 脚本
- 要求支持命令行参数，包括：权限模式和文件名
- 命令行参数不存在的情况下，打印错误信息
- 命令行参数指定的文件名不存在时或者其他参数不正确时，打印相应的错误信息
- 正常情况下修改指定文件的权限

## 修改文件所有者

要求：
- 编写 16-my-chown.js 脚本
- 要求支持命令行参数，包括：用户 ID，组 ID 和文件名
- 命令行参数不存在的情况下，打印错误信息
- 命令行参数指定的文件名不存在时或者其他参数不正确时，打印相应的错误信息
- 正常情况下修改指定文件的所属用户和所属组

## 文件信息统计

要求：
- 编写 17-my-stat.js 脚本
- 要求支持命令行参数，包括：要统计信息的文件名
- 命令行参数不存在的情况下，默认统计当前脚本文件的信息
- 命令行参数指定的文件名不存在时，打印错误信息
- 正常情况下统计命令行参数指定文件的统计信息

## 监视文件变化

要求：
- 编写 18-watch.js 脚本
- 监视脚本所在目录下文件的变化
- 把目录下文件的变化输出到控制台
- 按下 Ctrl+C 或者 kill -2 pid，程序结束运行
- 程序结束前打印程序将要结束运行的提示信息
- 程序并不立即结束，需要等 5 秒后才结束

## 递归删除

要求：
- 编写 19-my-rm.js 脚本
- 要求支持命令行参数，包括：要删除的目录名或文件名
- 命令行参数不存在的情况下，打印错误信息
- 命令行参数指定的文件名或者目录名不存在时，打印错误信息
- 如果命令行参数是合法的文件名，则删除文件
- 如果命令行参数是合法的目录名，则删除该目录以及该目录下的所有文件以及子目录
