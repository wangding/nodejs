require(["gitbook","jQuery"],function(o,i){var n,s,a=[];function l(e){var t;a=e||a,n=i(".versions-select select").val()||n,i(".versions-select").remove(),0!==a.length&&(e=i("<li>",{class:"versions-select",html:"<div><select></select></div>"}),t=e.find("select"),i.each(a,function(e,n){i("<option>",{selected:-1!==window.location.href.indexOf(n.value),value:n.value,text:n.text}).appendTo(t)}),t.change(function(){var e=i.grep(a,function(e){return e.value===t.val()})[0],n=window.location.href.replace(o.state.bookRoot,"");window.location.href=e.includeFilepath?e.value+n:e.value}),e.prependTo(".book-summary ul.summary"))}o.events.bind("start",function(e,n){var t;(s=n.versions||{}).options&&l(s.options),s.gitbookConfigURL?(n=s.gitbookConfigURL,i.getJSON(n,function(e){l(e.pluginsConfig.versions.options)})):(t=s.type||"branches",i.getJSON(o.state.bookRoot+"gitbook/api/versions/"+t,function(e){l(i.map(e,function(e){return{text:e.name,value:e.urls.website,selected:e.current,includeFilepath:!1!==s.includeFilepath&&"languages"!==t}}))}))}),o.events.bind("page.change",function(){l()})});